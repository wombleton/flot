(function(b){var a={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function c(g){var h={x:-1,y:-1,locked:false};g.setCrosshair=function d(j){if(!j){h.x=-1}else{var i=g.p2c(j);h.x=Math.max(0,Math.min(i.left,g.width()));h.y=Math.max(0,Math.min(i.top,g.height()))}g.triggerRedrawOverlay()};g.clearCrosshair=g.setCrosshair;g.lockCrosshair=function e(i){if(i){g.setCrosshair(i)}h.locked=true};g.unlockCrosshair=function f(){h.locked=false};g.hooks.bindEvents.push(function(j,i){if(!j.getOptions().crosshair.mode){return}i.mouseout(function(){if(h.locked){return}if(h.x!=-1){h.x=-1;j.triggerRedrawOverlay()}});i.mousemove(function(k){if(h.locked){return}if(j.getSelection&&j.getSelection()){h.x=-1;return}var l=j.offset();h.x=Math.max(0,Math.min(k.pageX-l.left,j.width()));h.y=Math.max(0,Math.min(k.pageY-l.top,j.height()));j.triggerRedrawOverlay()})});g.hooks.drawOverlay.push(function(k,i){var l=k.getOptions().crosshair;if(!l.mode){return}var j=k.getPlotOffset();i.save();i.translate(j.left,j.top);if(h.x!=-1){i.strokeStyle=l.color;i.lineWidth=l.lineWidth;i.lineJoin="round";i.beginPath();if(l.mode.indexOf("x")!=-1){i.moveTo(h.x,0);i.lineTo(h.x,k.height())}if(l.mode.indexOf("y")!=-1){i.moveTo(0,h.y);i.lineTo(k.width(),h.y)}i.stroke()}i.restore()})}b.plot.plugins.push({init:c,options:a,name:"crosshair",version:"1.0"})})(jQuery);